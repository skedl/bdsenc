<!DOCTYPE html>
<html>

	
	<script src="js/weiyan.js"></script>
	<script src="js/axios.min.js"></script>
	<head>
	    <meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	    <title>SakuraEnc | ä¸ºæ‚¨çš„è¾“å…¥æ³•çš®è‚¤ä¿é©¾æŠ¤èˆª</title>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
	    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

		<style>
	        * {
	            margin: 0;
	            padding: 0;
	            box-sizing: border-box;
	            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
	        }
	        
	        body {
            background: linear-gradient(135deg, #ffdde1 0%, #ee9ca7 30%, #ffdde1 100%);
            color: #5d4037;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow-x: hidden;
        }
	        
	        /* åŠ¨æ€èƒŒæ™¯ */
	        .sakura-background {
	            position: fixed;
	            top: 0;
	            left: 0;
	            width: 100%;
	            height: 100%;
	            z-index: -1;
	            pointer-events: none;
	            overflow: hidden;
	        }
	        
	        .sakura-grid {
	            position: absolute;
	            top: 0;
	            left: 0;
	            width: 100%;
	            height: 100%;
	            background: 
	                linear-gradient(90deg, rgba(255, 138, 158, 0.05) 1px, transparent 1px),
	                linear-gradient(0deg, rgba(255, 138, 158, 0.05) 1px, transparent 1px);
	            background-size: 60px 60px;
	            opacity: 0.3;
	        }
	        
	        .petal {
	            position: absolute;
	            background: rgba(255, 214, 223, 0.8);
	            width: 10px;
	            height: 10px;
	            border-radius: 150% 0 150% 0;
	            animation: falling linear infinite;
	            box-shadow: 0 0 10px rgba(255, 138, 158, 0.5);
	        }
	        
	        @keyframes falling {
	            0% {
	                transform: translateY(-20%) rotate(0deg);
	                opacity: 0;
	            }
	            10% {
	                opacity: 1;
	            }
	            100% {
	                transform: translateY(100vh) rotate(360deg);
	                opacity: 0;
	            }
	        }
	        
	        .light-filter {
	            position: absolute;
	            top: 0;
	            left: 0;
	            width: 100%;
	            height: 100%;
	            background: radial-gradient(circle at 50% 20%, rgba(255, 230, 235, 0.6), transparent 70%);
	            pointer-events: none;
	        }
	        
	        /* å¸ƒå±€å’Œå®¹å™¨ */
	        .container {
	            width: 100%;
	            max-width: 1200px;
	            margin: 40px auto;
	            z-index: 10;
	            animation: fadeIn 1.2s ease-out;
	        }
	        
	        /* å¤´éƒ¨æ ·å¼ */
	        header {
	            text-align: center;
	            padding: 60px 30px 40px;
	            margin-bottom: 40px;
	            position: relative;
	            overflow: hidden;
	            animation: slideDown 1s ease-out;
	        }
	        
	        .logo {
	            font-size: 4.5rem;
	            font-weight: 700;
	            margin-bottom: 20px;
	            background: linear-gradient(to right, #ff8a9e, #ff6b81, #ff4757);
	            -webkit-background-clip: text;
	            -webkit-text-fill-color: transparent;
	            text-shadow: 0 0 30px rgba(255, 138, 158, 0.3);
	            position: relative;
	            display: inline-block;
	            animation: logoPulse 4s infinite alternate;
	        }
	        
	        @keyframes logoPulse {
	            0% { text-shadow: 0 0 10px rgba(255, 138, 158, 0.3); }
	            100% { text-shadow: 0 0 40px rgba(255, 138, 158, 0.6), 0 0 80px rgba(255, 99, 132, 0.4); }
	        }
	        
	        .subtitle {
	            font-size: 1.6rem;
	            margin-bottom: 40px;
	            color: #c2185b;
	            max-width: 800px;
	            margin: 0 auto 40px;
	            line-height: 1.6;
	            animation: fadeInUp 1s ease 0.3s both;
	        }
	        
	        .features {
	            display: flex;
	            justify-content: center;
	            flex-wrap: wrap;
	            gap: 25px;
	            margin-top: 40px;
	            animation: fadeIn 1s ease 0.6s both;
	        }
	        
	        .feature {
	            background: rgba(255, 138, 158, 0.1);
	            padding: 18px 35px;
	            border-radius: 50px;
	            font-size: 1.2rem;
	            backdrop-filter: blur(10px);
	            border: 1px solid rgba(255, 138, 158, 0.2);
	            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
	            display: flex;
	            align-items: center;
	            gap: 15px;
	            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
	        }
	        
	        .feature:hover {
	            transform: translateY(-8px) scale(1.05);
	            background: rgba(255, 138, 158, 0.2);
	            border-color: rgba(255, 138, 158, 0.5);
	            box-shadow: 0 12px 35px rgba(255, 138, 158, 0.2);
	        }
	        
	        .feature i {
	            color: #ff8a9e;
	            font-size: 1.8rem;
	        }
	        
	        /* å¡ç‰‡æ ·å¼ */
	        .card {
	            background: rgba(255, 255, 255, 0.7);
	            backdrop-filter: blur(15px);
	            border-radius: 25px;
	            padding: 50px;
	            margin-bottom: 40px;
	            box-shadow: 
	                0 15px 40px rgba(233, 30, 99, 0.15),
	                0 0 0 1px rgba(255, 183, 197, 0.3);
	            color: #5d4037;
	            border: 1px solid rgba(255, 183, 197, 0.2);
	            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
	            position: relative;
	            overflow: hidden;
	            animation: cardAppear 1s ease 0.8s both;
	        }
	        
	        .card::before {
	            content: "";
	            position: absolute;
	            top: 0;
	            left: 0;
	            width: 100%;
	            height: 4px;
	            background: linear-gradient(90deg, #ff8a9e, #ffccd5, #ff8a9e);
	            box-shadow: 0 0 15px rgba(255, 138, 158, 0.3);
	            animation: borderFlow 6s infinite linear;
	        }
	        
	        @keyframes borderFlow {
	            0% { background-position: 0% 50%; }
	            100% { background-position: 200% 50%; }
	        }
	        
	        .card:hover {
	            transform: translateY(-10px);
	            box-shadow: 
	                0 25px 50px rgba(233, 30, 99, 0.25),
	                0 0 0 2px rgba(255, 183, 197, 0.5);
	        }
	        
	        .card-title {
	            font-size: 2.2rem;
	            margin-bottom: 40px;
	            color: #c2185b;
	            display: flex;
	            align-items: center;
	            gap: 20px;
	            position: relative;
	            padding-bottom: 20px;
	        }
	        
	        .card-title::after {
	            content: "";
	            position: absolute;
	            bottom: 0;
	            left: 0;
	            width: 200px;
	            height: 4px;
	            background: linear-gradient(90deg, #ff8a9e, transparent);
	            border-radius: 3px;
	        }
	        
	        .card-title i {
	            color: #ff8a9e;
	            font-size: 2.5rem;
	            animation: iconPulse 2s infinite alternate;
	        }
	        
	        @keyframes iconPulse {
	            0% { transform: scale(1); }
	            100% { transform: scale(1.1); filter: drop-shadow(0 0 10px rgba(0, 242, 254, 0.7)); }
	        }
	        
	        /* è¾“å…¥ç»„æ ·å¼ */
	        .input-group {
	            margin-bottom: 40px;
	            animation: fadeIn 0.8s ease 1s both;
	        }
	        
	        label {
	            display: block;
	            margin-bottom: 15px;
	            font-weight: 600;
	            color: #c2185b;
	            font-size: 1.3rem;
	            display: flex;
	            align-items: center;
	            gap: 12px;
	        }
	        
	        input, textarea {
	            width: 100%;
	            padding: 20px 25px;
	            background: rgba(255, 255, 255, 0.6);
	            border: 1px solid rgba(255, 138, 158, 0.3);
	            border-radius: 15px;
	            font-size: 1.2rem;
	            transition: all 0.4s;
	            color: #5d4037;
	            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
	        }
	        
	        input:focus, textarea:focus {
	            border-color: #ff8a9e;
	            outline: none;
	            box-shadow: 
	                0 0 0 4px rgba(255, 138, 158, 0.2),
	                0 10px 30px rgba(255, 138, 158, 0.2);
	            background: rgba(255, 255, 255, 0.8);
	        }
	        
	        .file-input-container {
	            border: 2px dashed rgba(255, 138, 158, 0.3);
	            border-radius: 20px;
	            padding: 50px;
	            text-align: center;
	            transition: all 0.5s;
	            background: rgba(255, 255, 255, 0.6);
	            cursor: pointer;
	            position: relative;
	            overflow: hidden;
	            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
	        }
	        
	        .file-input-container::before {
	            content: "";
	            position: absolute;
	            top: 0;
	            left: -100%;
	            width: 100%;
	            height: 100%;
	            background: linear-gradient(90deg, transparent, rgba(255, 138, 158, 0.1), transparent);
	            transition: left 1.2s;
	        }
	        
	        .file-input-container:hover::before, 
	        .file-input-container.dragover::before {
	            left: 100%;
	        }
	        
	        .file-input-container:hover, .file-input-container.dragover {
	            border-color: #ff8a9e;
	            background: rgba(255, 255, 255, 0.8);
	            transform: translateY(-5px);
	            box-shadow: 0 15px 40px rgba(255, 138, 158, 0.2);
	        }
	        
	        .file-input-container i {
	            font-size: 4.5rem;
	            color: #ff8a9e;
	            margin-bottom: 30px;
	            display: block;
	            animation: floatIcon 3s infinite ease-in-out;
	        }
	        
	        @keyframes floatIcon {
	            0% { transform: translateY(0); }
	            50% { transform: translateY(-15px); }
	            100% { transform: translateY(0); }
	        }
	        
	        .file-input-container p {
	            font-size: 1.4rem;
	            margin-bottom: 20px;
	        }
	        
	        /* æŒ‰é’®æ ·å¼ */
	        .btn {
	            background: linear-gradient(135deg, #ff8a9e, #ff6b81);
	            color: white;
	            border: none;
	            padding: 20px 40px;
	            font-size: 1.4rem;
	            border-radius: 15px;
	            cursor: pointer;
	            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
	            display: inline-flex;
	            align-items: center;
	            justify-content: center;
	            gap: 15px;
	            font-weight: 700;
	            box-shadow: 
	                0 12px 30px rgba(255, 138, 158, 0.4),
	                inset 0 4px 0 rgba(255, 255, 255, 0.3);
	            position: relative;
	            overflow: hidden;
	            border: 1px solid rgba(255, 255, 255, 0.2);
	            letter-spacing: 1px;
	            animation: btnPulse 3s infinite alternate;
	        }
	        
	        @keyframes btnPulse {
	            0% { box-shadow: 0 12px 30px rgba(255, 138, 158, 0.4), inset 0 4px 0 rgba(255, 255, 255, 0.3); }
	            100% { box-shadow: 0 12px 40px rgba(255, 138, 158, 0.6), inset 0 4px 0 rgba(255, 255, 255, 0.4); }
	        }
	        
	        .btn::before {
	            content: "";
	            position: absolute;
	            top: 0;
	            left: -100%;
	            width: 100%;
	            height: 100%;
	            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
	            transition: 0.8s;
	        }
	        
	        .btn:hover::before {
	            left: 100%;
	        }
	        
	        .btn:hover {
	            transform: translateY(-8px) scale(1.05);
	            box-shadow: 
	                0 18px 45px rgba(255, 138, 158, 0.6),
	                inset 0 4px 0 rgba(255, 255, 255, 0.4);
	        }
	        
	        .btn:active {
	            transform: translateY(2px);
	            box-shadow: 
	                0 8px 25px rgba(255, 138, 158, 0.4),
	                inset 0 4px 0 rgba(255, 255, 255, 0.2);
	        }
	        
	        .btn:disabled {
	            background: linear-gradient(135deg, #e0e0e0, #bdbdbd);
	            cursor: not-allowed;
	            transform: none;
	            box-shadow: none;
	            animation: none;
	        }
	        
	        .btn-block {
	            width: 100%;
	        }
	        
	        .btn-alt {
	            background: linear-gradient(135deg, #ffafbd, #ffc3a0);
	        }
	        
	        .btn-success {
	            background: linear-gradient(135deg, #f8b195, #f67280);
	        }
	        
	        /* è¿›åº¦æŒ‡ç¤ºå™¨ */
	        .progress-indicator {
	            background: rgba(255, 255, 255, 0.7);
	            backdrop-filter: blur(15px);
	            padding: 30px;
	            border-radius: 20px;
	            margin-bottom: 40px;
	            border: 1px solid rgba(255, 138, 158, 0.3);
	            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.08);
	            display: none;
	            animation: fadeIn 0.6s ease;
	        }
	        
	        .progress-header {
	            display: flex;
	            justify-content: space-between;
	            margin-bottom: 20px;
	            font-size: 1.3rem;
	            color: #c2185b;
	        }
	        
	        .progress-bar {
	            height: 35px;
	            background: rgba(255, 255, 255, 0.6);
	            border-radius: 20px;
	            overflow: hidden;
	            position: relative;
	            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.08);
	            border: 1px solid rgba(255, 138, 158, 0.3);
	        }
	        
	        .progress-fill {
	            height: 100%;
	            background: linear-gradient(90deg, #ff8a9e, #ff6b81, #ff8a9e);
	            width: 0%;
	            transition: width 1s cubic-bezier(0.34, 1.56, 0.64, 1);
	            border-radius: 20px;
	            position: relative;
	            overflow: hidden;
	        }
	        
	        .progress-fill::after {
	            content: "";
	            position: absolute;
	            top: 0;
	            left: -100%;
	            width: 100%;
	            height: 100%;
	            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
	            animation: progressShine 2s infinite;
	        }
	        
	        @keyframes progressShine {
	            0% { left: -100%; }
	            100% { left: 100%; }
	        }
	        
	        .progress-text {
	            position: absolute;
	            top: 50%;
	            left: 50%;
	            transform: translate(-50%, -50%);
	            color: white;
	            font-weight: bold;
	            font-size: 1.3rem;
	        }
	        
	        /* ç»“æœå¡ç‰‡ */
	        .result-card {
	            display: none;
	            animation: cardAppear 1s ease;
	        }
	        
	        .result-grid {
	            display: grid;
	            grid-template-columns: 1fr 1fr;
	            gap: 30px;
	            margin: 40px 0;
	            animation: fadeIn 0.8s ease;
	        }
	        
	        .result-item {
	            background: rgba(255, 255, 255, 0.6);
	            padding: 30px;
	            border-radius: 20px;
	            text-align: center;
	            border: 1px solid rgba(255, 138, 158, 0.3);
	            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
	            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
	        }
	        
	        .result-item:hover {
	            transform: translateY(-10px);
	            border-color: rgba(255, 138, 158, 0.6);
	            box-shadow: 0 15px 45px rgba(255, 138, 158, 0.2);
	        }
	        
	        .result-item i {
	            font-size: 3.5rem;
	            color: #ff6b81;
	            margin-bottom: 20px;
	        }
	        
	        .result-value {
	            font-size: 1.8rem;
	            font-weight: bold;
	            color: #ff6b81;
	            margin: 20px 0;
	        }
	        
	        .file-info {
	            background: rgba(255, 255, 255, 0.6);
	            padding: 30px;
	            border-radius: 20px;
	            margin: 40px 0;
	            border: 1px solid rgba(255, 138, 158, 0.3);
	            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
	            animation: fadeIn 1s ease;
	        }
	        
	        .file-info p {
	            margin: 15px 0;
	            font-size: 1.2rem;
	            display: flex;
	        }
	        
	        .file-info p strong {
	            min-width: 180px;
	            color: #ff8a9e;
	        }
	        
	        /* æ³•å¾‹å£°æ˜é¢„è§ˆ */
	        .legal-title {
	            text-align: center;
	            font-weight: bold;
	            margin-bottom: 30px;
	            color: #c2185b;
	            font-size: 1.8rem;
	            animation: fadeIn 1s ease;
	        }
	        
	        .legal-preview {
	            background: rgba(255, 255, 255, 0.7);
	            border: 1px solid rgba(255, 138, 158, 0.3);
	            border-radius: 20px;
	            padding: 30px;
	            margin-top: 30px;
	            max-height: 350px;
	            overflow-y: auto;
	            font-size: 1.1rem;
	            line-height: 1.8;
	            color: #5d4037;
	            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3);
	            animation: fadeIn 1s ease;
	        }
	        
	        .legal-preview::-webkit-scrollbar {
	            width: 10px;
	        }
	        
	        .legal-preview::-webkit-scrollbar-track {
	            background: rgba(255, 255, 255, 0.6);
	            border-radius: 5px;
	        }
	        
	        .legal-preview::-webkit-scrollbar-thumb {
	            background: linear-gradient(to bottom, #ff8a9e, #ff6b81);
	            border-radius: 5px;
	        }
	        
	        /* ä¸‹è½½æŒ‰é’® */
	        .download-buttons {
	            display: flex;
	            gap: 25px;
	            margin-top: 40px;
	            flex-wrap: wrap;
	            animation: fadeIn 1s ease;
	        }
	        
	        /* è¯´æ˜åŒºåŸŸ */
	        .note {
	            background: rgba(255, 138, 158, 0.15);
	            padding: 30px;
	            border-radius: 20px;
	            margin-top: 40px;
	            border-left: 5px solid #ff6b81;
	            color: #c2185b;
	            font-size: 1.2rem;
	            line-height: 1.8;
	            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
	            animation: fadeIn 1s ease;
	        }
	        
	        .note p {
	            margin: 15px 0;
	            display: flex;
	            align-items: center;
	            gap: 15px;
	        }
	        
	        .note i {
	            color: #ff6b81;
	            font-size: 1.5rem;
	        }
	        
	        /* æ–‡ä»¶åˆ—è¡¨æ ·å¼ */
	        .file-list {
	            background: rgba(255, 255, 255, 0.6);
	            border-radius: 15px;
	            padding: 20px;
	            margin-top: 15px;
	            max-height: 300px;
	            overflow-y: auto;
	            border: 1px dashed rgba(255, 138, 158, 0.3);
	        }
	        
	        .file-item {
	            padding: 15px;
	            border-bottom: 1px solid rgba(255, 138, 158, 0.1);
	            display: flex;
	            align-items: center;
	            gap: 15px;
	            transition: background 0.3s;
	        }
	        
	        .file-item:hover {
	            background: rgba(255, 240, 245, 0.7);
	        }
	        
	        .file-item:last-child {
	            border-bottom: none;
	        }
	        
	        .file-icon {
	            font-size: 1.8rem;
	            color: #ff6b81;
	            min-width: 40px;
	            text-align: center;
	        }
	        
	        .file-details {
	            flex: 1;
	        }
	        
	        .file-name {
	            font-weight: 500;
	            margin-bottom: 5px;
	        }
	        
	        .file-size {
	            font-size: 0.9rem;
	            color: #8d6e63;
	        }
	        
	        .file-extension {
	            font-weight: bold;
	            color: #ff6b81;
	        }
	        
	        /* æ–‡ä»¶è®¡æ•° */
	        .file-count {
	            color: #ff6b81;
	            font-weight: bold;
	            margin-left: 5px;
	        }
	        
	        /* é¡µè„š */
	        footer {
	            text-align: center;
	            margin-top: 60px;
	            padding: 40px;
	            color: #8d6e63;
	            font-size: 1.1rem;
	            max-width: 800px;
	            animation: fadeIn 1.5s ease;
	        }
	        
	        /* åŠ¨ç”»å®šä¹‰ */
	        @keyframes fadeIn {
	            from { opacity: 0; }
	            to { opacity: 1; }
	        }
	        
	        @keyframes fadeInUp {
	            from { opacity: 0; transform: translateY(50px); }
	            to { opacity: 1; transform: translateY(0); }
	        }
	        
	        @keyframes slideDown {
	            from { opacity: 0; transform: translateY(-50px); }
	            to { opacity: 1; transform: translateY(0); }
	        }
	        
	        @keyframes cardAppear {
	            from { opacity: 0; transform: translateY(50px) scale(0.95); }
	            to { opacity: 1; transform: translateY(0) scale(1); }
	        }
	        
	        /* å“åº”å¼è®¾è®¡ */
	        @media (max-width: 992px) {
	            .result-grid {
	                grid-template-columns: 1fr;
	            }
	            
	            .download-buttons {
	                flex-direction: column;
	            }
	            
	            .card {
	                padding: 30px;
	            }
	            
	            .logo {
	                font-size: 3.5rem;
	            }
	            
	            .subtitle {
	                font-size: 1.3rem;
	            }
	        }
	        
	        @media (max-width: 768px) {
	            header {
	                padding: 40px 20px;
	            }
	            
	            .logo {
	                font-size: 3rem;
	            }
	            
	            .feature {
	                padding: 15px 25px;
	                font-size: 1.1rem;
	            }
	            
	            .file-input-container {
	                padding: 30px;
	            }
	            
	            .card-title {
	                font-size: 1.8rem;
	            }
	        }
	    </style>
	</head>
	<body>
	    <div class="sakura-background">
	        <div class="sakura-grid"></div>
	        <div class="light-filter"></div>
	        <!-- æ¨±èŠ±èŠ±ç“£å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
	    </div>
	    
	    <div class="container">
	        <header>
	            <div class="logo">Sakura Enc</div>
	            <div class="subtitle">å±±æ°´æ·¡é›… Â· å®‰è‹¥ç£çŸ³</div>
	            <div class="features">
	                <div class="feature"><i class="fas fa-lock"></i> è¿œè¶…åŒè¡Œçš„å®‰å…¨</div>
	                <div class="feature"><i class="fas fa-gavel"></i> ä¸€å¯¹ä¸€çš„æ‰“æ ‡æœº</div>
	                <div class="feature"><i class="fas fa-copy"></i> è¶…é«˜çš„å…¼å®¹æ€§</div>
	                <div class="feature"><i class="fas fa-file-download"></i>æ‰¹é‡åŠ å¯†å“è¶Šçš„æ€§èƒ½</div>
	            </div>
	        </header>
	        
	        <div class="card">
	            <div class="card-title"><i class="fas fa-file-upload"></i> é€‰æ‹©æ•°å­—èµ„äº§æ–‡ä»¶</div>
	            
	            <div class="input-group">
	                <label for="creator"><i class="fas fa-user"></i> ç‰ˆæƒæ‰€æœ‰æ–¹</label>
	                <input type="text" id="creator" placeholder="è¾“å…¥ç‰ˆæƒæ‰€æœ‰æ–¹åç§°" value="åŒ¿ååˆ›ä½œè€…">
	            </div>
	            
	            <div class="input-group">
	                <label for="counterpart"><i class="fas fa-handshake"></i> å¯¹æ–¹ä¿¡æ¯ï¼ˆå¤šä¸ªç”¨åˆ†å· ; åˆ†éš”ï¼‰</label>
	                <input type="text" id="counterpart" placeholder="ä¾‹å¦‚: ç”²æ–¹å…¬å¸; ä¹™æ–¹å…¬å¸; å®¢æˆ·åç§°">
	            </div>
	            
	            <div class="input-group">
	                <label><i class="fas fa-file"></i> é€‰æ‹©è¾“å…¥æ³•çš®è‚¤ï¼ˆæ”¯æŒä»»æ„æ–‡ä»¶ç±»å‹ï¼‰</label>
	                <div class="file-input-container" id="dropZone">
	                    <i class="fas fa-cloud-upload-alt"></i>
	                    <p>æ‹–æ”¾è¾“å…¥æ³•çš®è‚¤åˆ°æ­¤å¤„æˆ– </p>
						<p> <span class="btn">é€‰æ‹©æ–‡ä»¶</span></p>
	                    <input type="file" id="fileInput" multiple hidden>
	                    <p id="fileName" style="margin-top: 30px; color: #00f2fe; font-weight: 500;">
	                        <i class="fas fa-file"></i> å·²é€‰æ‹© <span class="file-count" id="fileCount">0</span> ä¸ªæ–‡ä»¶
	                    </p>
	                </div>
	            </div>
	            
	            <div class="input-group">
	                <label>å·²é€‰æ–‡ä»¶åˆ—è¡¨:</label>
	                <div class="file-list" id="fileList">
	                    <div class="file-item" style="justify-content: center; color: #90a4ae;">
	                        å°šæœªé€‰æ‹©ä»»ä½•æ–‡ä»¶
	                    </div>
	                </div>
	            </div>
	            
	            <div class="input-group">
	                <label><i class="fas fa-file-alt"></i> æˆ–ä¸Šä¼ åŒ…å«å¯¹æ–¹ä¿¡æ¯çš„æ–‡æœ¬æ–‡ä»¶ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰</label>
	                <div class="action-buttons" style="display: flex; gap: 15px;">
	                    <button class="btn btn-alt" id="uploadCounterpartBtn">ä¸Šä¼ å¯¹æ–¹ä¿¡æ¯æ–‡ä»¶</button>
	                    <button class="btn btn-alt" id="exampleCounterpartBtn">ä½¿ç”¨ç¤ºä¾‹ä¿¡æ¯</button>
	                </div>
	                <input type="file" id="counterpartFile" accept=".txt" hidden>
	            </div>
	            
	            <button id="processBtn" class="btn btn-block">
	                <i class="fas fa-shield-alt"></i> å¼€å§‹ä¿æŠ¤å¤„ç†
	            </button>
	        </div>
	        
	        <div class="progress-indicator" id="progressIndicator">
	            <div class="progress-header">
	                <span id="progressMessage">å‡†å¤‡å¼€å§‹å¤„ç†...</span>
	                <span id="progressPercent">0%</span>
	            </div>
	            <div class="progress-bar">
	                <div class="progress-fill" id="progressFill"></div>
	                <div class="progress-text" id="progressText">0%</div>
	            </div>
	        </div>
	        
	        <div class="card result-card" id="resultCard">
	            <div class="card-title"><i class="fas fa-check-circle"></i> å¤„ç†å®Œæˆ</div>
	            
	            <div class="file-info">
	                <p><strong>å¤„ç†æ‘˜è¦ï¼š</strong></p>
	                <p><strong>ç‰ˆæƒæŒæœ‰æ–¹ï¼š</strong><span id="resultCreator">åŒ¿ååˆ›ä½œè€…</span></p>
	                <p><strong>å¯¹æ–¹ä¿¡æ¯æ•°ï¼š</strong><span id="resultCounterpartCount">0</span></p>
	                <p><strong>å¤„ç†æ–‡ä»¶æ•°ï¼š</strong><span id="processedFiles">0</span></p>
	                <p><strong>ç”Ÿæˆä¿æŠ¤æ–‡ä»¶ï¼š</strong><span id="protectedFiles">0</span></p>
	                <p><strong>å¤„ç†æ—¶é—´ï¼š</strong><span id="processTime">0</span> ç§’</p>
	            </div>
	            
	            <div>
	                <div class="legal-title">æ•°å­—èµ„äº§æ³•å¾‹å£°æ˜</div>
	                <div class="legal-preview" id="legalPreview">
	                    <!-- æ³•å¾‹å£°æ˜é¢„è§ˆå†…å®¹ -->
	                </div>
	            </div>
	            
	            <div class="download-buttons" id="downloadButtons">
	                <!-- ä¸‹è½½æŒ‰é’®å°†æ ¹æ®å¤„ç†ç»“æœåŠ¨æ€ç”Ÿæˆ -->
	            </div>
	            
	            <div class="note">
	                <p><i class="fas fa-info-circle"></i> <strong>ä½¿ç”¨è¯´æ˜ï¼š</strong></p>
	                <p><i class="fas fa-check"></i> ä¿æŠ¤åçš„æ–‡ä»¶å¯æ­£å¸¸åœ¨ç›¸å…³è½¯ä»¶ä¸­ä½¿ç”¨</p>
	                <p><i class="fas fa-check"></i> ä»»ä½•è§£å‹å°è¯•éƒ½å°†æ˜¾ç¤ºæ³•å¾‹å£°æ˜å†…å®¹</p>
	                <p><i class="fas fa-check"></i> æ™ºèƒ½ä¸‹è½½ï¼šå•ä¸ªæ–‡ä»¶ç›´æ¥ä¸‹è½½ï¼Œå¤šä¸ªæ–‡ä»¶æ‰“åŒ…ä¸‹è½½</p>
	                <p><i class="fas fa-check"></i> <strong>æ–‡ä»¶åç¼€å®Œå…¨ä¿ç•™</strong>ï¼šå¤„ç†åçš„æ–‡ä»¶ç±»å‹ä¸åŸå§‹æ–‡ä»¶ä¸€è‡´</p>
	            </div>
	        </div>
	    </div>
	    
	    <footer>
	        <p>Â© 2025 Project | é«˜çº§æ•°å­—èµ„äº§ä¿æŠ¤å·¥å…·</p>
	        <p>æœ¬å·¥å…·å®Œå…¨åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œæ‚¨çš„æ–‡ä»¶ä¸ä¼šè¢«ä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨</p>
	    </footer>
	
	    <script>
	        // DOMå…ƒç´ 
	        const fileInput = document.getElementById('fileInput');
	        const dropZone = document.getElementById('dropZone');
	        const fileCount = document.getElementById('fileCount');
	        const fileList = document.getElementById('fileList');
	        const processBtn = document.getElementById('processBtn');
	        const progressIndicator = document.getElementById('progressIndicator');
	        const resultCard = document.getElementById('resultCard');
	        const progressFill = document.getElementById('progressFill');
	        const progressText = document.getElementById('progressText');
	        const progressPercent = document.getElementById('progressPercent');
	        const progressMessage = document.getElementById('progressMessage');
	        const legalPreview = document.getElementById('legalPreview');
	        const downloadButtons = document.getElementById('downloadButtons');
	        const uploadCounterpartBtn = document.getElementById('uploadCounterpartBtn');
	        const exampleCounterpartBtn = document.getElementById('exampleCounterpartBtn');
	        const counterpartFile = document.getElementById('counterpartFile');
	        
	        // å…¨å±€å˜é‡
	        let selectedFiles = [];
	        let counterparts = [];
	        let protectedFiles = [];
	        let startTime = null;
	        let totalFilesToProcess = 0;
	        let processedFiles = 0;
	        
	        // ç”Ÿæˆæ¨±èŠ±èŠ±ç“£
        function createPetals() {
            const sakuraBackground = document.querySelector('.sakura-background');
            const petalCount = 50; // èŠ±ç“£æ•°é‡
            
            for (let i = 0; i < petalCount; i++) {
                setTimeout(() => {
                    const petal = document.createElement('div');
                    petal.classList.add('petal');
                    
                    // éšæœºä½ç½®
                    const left = Math.random() * 100;
                    
                    // éšæœºå¤§å°
                    const size = 5 + Math.random() * 15;
                    
                    // éšæœºåŠ¨ç”»æŒç»­æ—¶é—´
                    const duration = 5 + Math.random() * 15;
                    
                    // éšæœºåŠ¨ç”»å»¶è¿Ÿ
                    const delay = Math.random() * 10;
                    
                    // éšæœºæ—‹è½¬
                    const rotation = Math.random() * 360;
                    
                    // è®¾ç½®æ ·å¼
                    petal.style.left = `${left}%`;
                    petal.style.width = `${size}px`;
                    petal.style.height = `${size}px`;
                    petal.style.opacity = `${0.5 + Math.random() * 0.5}`;
                    petal.style.transform = `rotate(${rotation}deg)`;
                    petal.style.animation = `falling ${duration}s linear ${delay}s infinite`;
                    petal.style.animationTimingFunction = `cubic-bezier(${0.1 + Math.random() * 0.3}, 0, ${0.5 + Math.random() * 0.4}, 1)`;
                    petal.style.zIndex = '1';
                    
                    // æ·»åŠ åˆ°èƒŒæ™¯
                    sakuraBackground.appendChild(petal);
                    
                    // èŠ±ç“£åŠ¨ç”»ç»“æŸåç§»é™¤å¹¶åˆ›å»ºæ–°çš„
                    setTimeout(() => {
                        if (sakuraBackground.contains(petal)) {
                            sakuraBackground.removeChild(petal);
                        }
                        // åˆ›å»ºæ–°èŠ±ç“£
                        setTimeout(() => {
                            const newPetal = document.createElement('div');
                            newPetal.classList.add('petal');
                            newPetal.style.left = `${Math.random() * 100}%`;
                            newPetal.style.width = `${5 + Math.random() * 15}px`;
                            newPetal.style.height = `${5 + Math.random() * 15}px`;
                            newPetal.style.opacity = `${0.5 + Math.random() * 0.5}`;
                            newPetal.style.transform = `rotate(${Math.random() * 360}deg)`;
                            newPetal.style.animation = `falling ${5 + Math.random() * 15}s linear ${Math.random() * 10}s infinite`;
                            newPetal.style.animationTimingFunction = `cubic-bezier(${0.1 + Math.random() * 0.3}, 0, ${0.5 + Math.random() * 0.4}, 1)`;
                            newPetal.style.zIndex = '1';
                            sakuraBackground.appendChild(newPetal);
                        }, 100);
                    }, (duration + delay) * 1000);
                }, i * 300);
            }
        }

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
        function init() {
	            // ç‚¹å‡»æ‹–æ”¾åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©
	            dropZone.addEventListener('click', () => {
	                fileInput.click();
	            });
	            
	            // æ–‡ä»¶é€‰æ‹©å˜åŒ–
	            fileInput.addEventListener('change', handleFileSelect);
	            
	            // æ‹–æ”¾åŠŸèƒ½
	            dropZone.addEventListener('dragover', (e) => {
	                e.preventDefault();
	                dropZone.classList.add('dragover');
	            });
	            
	            dropZone.addEventListener('dragleave', () => {
	                dropZone.classList.remove('dragover');
	            });
	            
	            dropZone.addEventListener('drop', (e) => {
	                e.preventDefault();
	                dropZone.classList.remove('dragover');
	                
	                if (e.dataTransfer.files.length) {
	                    handleFiles(e.dataTransfer.files);
	                }
	            });
	            
	            // å¤„ç†æŒ‰é’®ç‚¹å‡»
	            processBtn.addEventListener('click', processFiles);
	            
	            // ä¸Šä¼ å¯¹æ–¹ä¿¡æ¯æ–‡ä»¶
	            uploadCounterpartBtn.addEventListener('click', () => counterpartFile.click());
	            
	            // ç¤ºä¾‹å¯¹æ–¹ä¿¡æ¯
	            exampleCounterpartBtn.addEventListener('click', () => {
	                counterparts = ["ç”²æ–¹å…¬å¸", "ä¹™æ–¹å…¬å¸", "é‡è¦å®¢æˆ·", "åˆä½œä¼™ä¼´"];
	                document.getElementById('counterpart').value = counterparts.join('; ');
	                showMessage('success', 'å·²åŠ è½½ç¤ºä¾‹å¯¹æ–¹ä¿¡æ¯');
	            });
	            
	            counterpartFile.addEventListener('change', async (e) => {
	                if (e.target.files.length > 0) {
	                    const file = e.target.files[0];
	                    try {
	                        const text = await file.text();
	                        // æŒ‰è¡Œåˆ†å‰²ï¼Œè¿‡æ»¤ç©ºè¡Œ
	                        counterparts = text.split('\n')
	                            .map(line => line.trim())
	                            .filter(line => line.length > 0);
	                        document.getElementById('counterpart').value = counterparts.join('; ');
	                        showMessage('success', `æˆåŠŸå¯¼å…¥ ${counterparts.length} ä¸ªå¯¹æ–¹ä¿¡æ¯`);
	                    } catch (error) {
	                        showMessage('error', 'è¯»å–å¯¹æ–¹ä¿¡æ¯æ–‡ä»¶å¤±è´¥');
	                    }
	                }
	            });
	        }
	        
	        // å¤„ç†æ–‡ä»¶é€‰æ‹©
	        function handleFileSelect(e) {
	            if (e.target.files.length) {
	                handleFiles(e.target.files);
	            }
	        }
	        
	        // å¤„ç†æ–‡ä»¶
	        function handleFiles(files) {
	            // æ·»åŠ æ‰€æœ‰æœ‰æ•ˆæ–‡ä»¶
	            selectedFiles = Array.from(files);
	            updateFileList();
	            
	            showMessage('success', `å·²é€‰æ‹© ${files.length} ä¸ªæ–‡ä»¶`);
	        }
	        
	        // æ›´æ–°æ–‡ä»¶åˆ—è¡¨æ˜¾ç¤º
	        function updateFileList() {
	            fileList.innerHTML = '';
	            fileCount.textContent = selectedFiles.length;
	            
	            if (selectedFiles.length === 0) {
	                fileList.innerHTML = '<div class="file-item" style="justify-content: center; color: #90a4ae;">å°šæœªé€‰æ‹©ä»»ä½•æ–‡ä»¶</div>';
	                return;
	            }
	            
	            selectedFiles.forEach(file => {
	                const fileItem = document.createElement('div');
	                fileItem.className = 'file-item';
	                
	                // è·å–æ–‡ä»¶å›¾æ ‡å’Œæ‰©å±•å
	                const fileIcon = getFileIcon(file.name);
	                const fileExtension = getFileExtension(file.name);
	                
	                fileItem.innerHTML = `
	                    <div class="file-icon">${fileIcon}</div>
	                    <div class="file-details">
	                        <div class="file-name">${file.name}</div>
	                        <div class="file-size">${formatBytes(file.size)} 
	                            <span class="file-extension">${fileExtension}</span>
	                        </div>
	                    </div>
	                `;
	                fileList.appendChild(fileItem);
	            });
	        }
	        
	        // è·å–æ–‡ä»¶æ‰©å±•å
	        function getFileExtension(filename) {
	            const parts = filename.split('.');
	            return parts.length > 1 ? `.${parts.pop()}` : 'æ— åç¼€';
	        }
	        
	        // è·å–æ–‡ä»¶ç±»å‹å›¾æ ‡
	        function getFileIcon(filename) {
	            const ext = filename.split('.').pop().toLowerCase();
	            const fileIcons = {
	                'pdf': 'ğŸ“„',
	                'doc': 'ğŸ“',
	                'docx': 'ğŸ“',
	                'xls': 'ğŸ“Š',
	                'xlsx': 'ğŸ“Š',
	                'ppt': 'ğŸ“½',
	                'pptx': 'ğŸ“½',
	                'jpg': 'ğŸ–¼',
	                'jpeg': 'ğŸ–¼',
	                'png': 'ğŸ–¼',
	                'gif': 'ğŸ–¼',
	                'zip': 'ğŸ“¦',
	                'rar': 'ğŸ“¦',
	                'txt': 'ğŸ“',
	                'bds': 'ğŸ”’',
	                'bda': 'ğŸ”’',
	                'bdi': 'ğŸ”’',
	                'mp3': 'ğŸµ',
	                'mp4': 'ğŸ¬',
	                'avi': 'ğŸ¬',
	                'mov': 'ğŸ¬'
	            };
	            
	            return fileIcons[ext] || 'ğŸ“';
	        }
	        
	        // æ›´æ–°è¿›åº¦æ¡
	        function updateProgress(message, percent) {
	            progressMessage.textContent = message;
	            progressPercent.textContent = `${percent}%`;
	            progressText.textContent = `${percent}%`;
	            progressFill.style.width = `${percent}%`;
	        }
	        
	        // æ˜¾ç¤ºè¿›åº¦
	        function showProgress(message, percent) {
	            progressIndicator.style.display = 'block';
	            updateProgress(message, percent);
	        }
	        
	        // æ˜¾ç¤ºæ¶ˆæ¯
	        function showMessage(type, text) {
	            // ç§»é™¤ç°æœ‰æ¶ˆæ¯
	            const existingMessages = document.querySelectorAll('.message');
	            existingMessages.forEach(msg => msg.remove());
	            
	            const message = document.createElement('div');
	            message.className = `message ${type}`;
	            message.textContent = text;
	            message.style.cssText = `
	                position: fixed;
	                top: 20px;
	                right: 20px;
	                padding: 15px 25px;
	                border-radius: 12px;
	                background: ${type === 'success' ? 'rgba(46, 125, 50, 0.9)' : 'rgba(198, 40, 40, 0.9)'};
	                color: white;
	                font-weight: 500;
	                box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
	                z-index: 1000;
	                animation: fadeIn 0.3s, fadeOut 0.3s 2.7s;
	                backdrop-filter: blur(5px);
	            `;
	            
	            document.body.appendChild(message);
	            
	            setTimeout(() => {
	                message.style.animation = 'fadeOut 0.3s forwards';
	                setTimeout(() => message.remove(), 300);
	            }, 2700);
	        }
	        
	        // å¤„ç†æ–‡ä»¶
	        async function processFiles() {
	            if (selectedFiles.length === 0) {
	                showMessage('error', 'è¯·å…ˆé€‰æ‹©è¦å¤„ç†çš„æ–‡ä»¶');
	                return;
	            }
	            
	            const creator = document.getElementById('creator').value || 'åŒ¿ååˆ›ä½œè€…';
	            let counterpartText = document.getElementById('counterpart').value.trim();
	            
	            // å¤„ç†å¯¹æ–¹ä¿¡æ¯
	            if (counterpartText) {
	                counterparts = counterpartText.split(';')
	                    .map(item => item.trim())
	                    .filter(item => item.length > 0);
	            } else {
	                counterparts = [""];
	            }
	            
	            if (counterparts.length === 0) {
	                showMessage('error', 'è¯·æä¾›è‡³å°‘ä¸€ä¸ªå¯¹æ–¹ä¿¡æ¯');
	                return;
	            }
	            
	            // è®¡ç®—æ€»å…±éœ€è¦å¤„ç†çš„æ–‡ä»¶æ•°é‡
	            totalFilesToProcess = selectedFiles.length * counterparts.length;
	            processedFiles = 0;
	            protectedFiles = [];
	            startTime = new Date();
	            
	            // æ˜¾ç¤ºè¿›åº¦å®¹å™¨
	            progressIndicator.style.display = 'block';
	            resultCard.style.display = 'none';
	            
	            try {
	                // å¤„ç†æ¯ä¸ªæ–‡ä»¶
	                for (let i = 0; i < selectedFiles.length; i++) {
	                    const file = selectedFiles[i];
	                    
	                    // å¤„ç†æ¯ä¸ªå¯¹æ–¹ä¿¡æ¯
	                    for (let j = 0; j < counterparts.length; j++) {
	                        const counterpart = counterparts[j];
	                        
	                        // æ›´æ–°è¿›åº¦
	                        const progress = Math.floor(processedFiles / totalFilesToProcess * 100);
	                        const fileProgress = Math.floor((i * counterparts.length + j + 1) / totalFilesToProcess * 100);
	                        
	                        showProgress(
	                            `å¤„ç†æ–‡ä»¶ ${i+1}/${selectedFiles.length}`, 
	                            fileProgress
	                        );
	                        
	                        // æ¨¡æ‹Ÿå¤„ç†å»¶è¿Ÿ
	                        await sleep(50);
	                        
	                        // è·å–æ–‡ä»¶åç¼€
	                        const extIndex = file.name.lastIndexOf('.');
	                        const ext = extIndex > -1 ? file.name.substring(extIndex) : '';
	                        const baseName = extIndex > -1 ? file.name.substring(0, extIndex) : file.name;
	                        
	                        // åˆ›å»ºä¿æŠ¤åçš„æ–‡ä»¶åï¼ˆä¿ç•™åŸå§‹åç¼€ï¼‰
	                        let protectedName;
	                        if (counterpart) {
	                            protectedName = `${baseName}_ç»™_${counterpart}${ext}`;
	                        } else {
	                            protectedName = `${baseName}_å·²ä¿æŠ¤${ext}`;
	                        }
	                        
	                        // è¯»å–æ–‡ä»¶å†…å®¹
	                        const content = await readFileAsArrayBuffer(file);
	                        
	                        // æ·»åŠ å®‰å…¨æ ‡è¯†å’Œæ³•å¾‹å£°æ˜
	                        const protectedContent = addSecurityFlagsAndNotice(content, file.name, creator, counterpart);
	                        
	                        // æ·»åŠ åˆ°ä¿æŠ¤æ–‡ä»¶åˆ—è¡¨
	                        protectedFiles.push({
	                            name: protectedName,
	                            content: protectedContent,
	                            size: protectedContent.byteLength,
	                            originalName: file.name,
	                            extension: ext
	                        });
	                        
	                        processedFiles++;
	                    }
	                }
	                
	                // å¤„ç†å®Œæˆ
	                updateProgress("å¤„ç†å®Œæˆ", 100);
	                
	                // æ˜¾ç¤ºç»“æœ
	                setTimeout(showResults, 800);
	                
	            } catch (error) {
	                showMessage('error', `å¤„ç†è¿‡ç¨‹ä¸­å‡ºé”™: ${error.message}`);
	                console.error(error);
	            }
	        }
	        
	        // è¯»å–æ–‡ä»¶ä¸ºArrayBuffer
	        function readFileAsArrayBuffer(file) {
	            return new Promise((resolve, reject) => {
	                const reader = new FileReader();
	                reader.onload = () => resolve(reader.result);
	                reader.onerror = reject;
	                reader.readAsArrayBuffer(file);
	            });
	        }
	        
	        // æ·»åŠ å®‰å…¨æ ‡è¯†å’Œæ³•å¾‹å£°æ˜
	        function addSecurityFlagsAndNotice(data, filename, creator, counterpart) {
	            // è½¬æ¢ArrayBufferä¸ºUint8Arrayä»¥ä¾¿æ“ä½œ
	            const buffer = new Uint8Array(data);
	            
	            // 1. æ›´æ–°å®‰å…¨æ ‡è¯†ä½
	            updateSecurityFlags(buffer);
	            
	            // 2. æ·»åŠ æ³•å¾‹å£°æ˜
	            const legalNotice = generateLegalNotice(creator, counterpart, filename);
	            const encoder = new TextEncoder();
	            const noticeBytes = encoder.encode(legalNotice);
	            
	            // åˆ›å»ºæ–°çš„ArrayBufferæ¥åŒ…å«åŸå§‹æ•°æ®+æ³•å¾‹å£°æ˜
	            const newBuffer = new Uint8Array(buffer.length + noticeBytes.length);
	            newBuffer.set(buffer, 0);
	            newBuffer.set(noticeBytes, buffer.length);
	            
	            return newBuffer;
	        }
	        
	        // æ›´æ–°å®‰å…¨æ ‡è¯†ä½
	        function updateSecurityFlags(buffer) {
	            const signature = new Uint8Array([0x50, 0x4b, 0x01, 0x02]); // '504b0102' in hex
	            
	            let position = 0;
	            
	            while (position < buffer.length - 4) {
	                let match = true;
	                for (let i = 0; i < 4; i++) {
	                    if (buffer[position + i] !== signature[i]) {
	                        match = false;
	                        break;
	                    }
	                }
	                
	                if (match) {
	                    // è®¾ç½®ç¬¬8ä½çš„æ ‡å¿—ä½
	                    buffer[position + 8] |= 1;
	                    
	                    // è®¡ç®—åç§»é‡
	                    const nameLen = buffer[position + 28] | (buffer[position + 29] << 8);
	                    const extraLen = buffer[position + 30] | (buffer[position + 31] << 8);
	                    const commentLen = buffer[position + 32] | (buffer[position + 33] << 8);
	                    
	                    position += 46 + nameLen + extraLen + commentLen;
	                } else {
	                    position++;
	                }
	            }
	            
	            return buffer;
	        }
	        
	        // ç”Ÿæˆæ³•å¾‹å£°æ˜
	        function generateLegalNotice(creator, counterpart, filename) {
	            const now = new Date();
	            const timestamp = `${now.getFullYear()}å¹´${(now.getMonth()+1).toString().padStart(2, '0')}æœˆ${now.getDate().toString().padStart(2, '0')}æ—¥ ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
	            const ext = filename.substring(filename.lastIndexOf('.')).toUpperCase();
	            
	            const counterpartInfo = counterpart ? `â–£ å¯¹æ–¹ä¿¡æ¯: ${counterpart}\n` : '';
	            
	            return `\n\nã€æ•°å­—èµ„äº§ä¿æŠ¤å£°æ˜ã€‘\n` +
	                `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n` +
	                `â–£ èµ„äº§åç§°: ã€Š${filename}ã€‹\n` +
	                `â–£ ç‰ˆæƒæŒæœ‰: ${creator}\n` +
	                counterpartInfo +
	                `â–£ ä¿æŠ¤ç”Ÿæ•ˆ: ${timestamp}\n` +
	                `â–£ æ–‡ä»¶ç±»å‹: ${ext}\n` +
	                `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n` +
	                `æ ¹æ®ç›¸å…³è‘—ä½œæƒæ³•è§„å®šï¼Œæœ¬æ•°å­—èµ„äº§å·²è·å¾—æ³•å¾‹ä¿æŠ¤ã€‚\n` +
	                `ä»»ä½•æœªç»æˆæƒçš„å¤åˆ¶ã€ä¿®æ”¹ã€åˆ†å‘æˆ–å•†ä¸šä½¿ç”¨å‡æ„æˆä¾µæƒè¡Œä¸ºã€‚\n` +
	                `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n` +
	                `â— Sakura Project | é«˜çº§é”®ç›˜çš®è‚¤ç‰ˆæƒä¿æŠ¤å·¥å…· â— 2025 â—\n`;
	        }
	        
	        // æ˜¾ç¤ºç»“æœ
	        function showResults() {
	            const creator = document.getElementById('creator').value || 'åŒ¿ååˆ›ä½œè€…';
	            const endTime = new Date();
	            const processTime = ((endTime - startTime) / 1000).toFixed(2);
	            
	            // æ›´æ–°ç»“æœä¿¡æ¯
	            document.getElementById('resultCreator').textContent = creator;
	            document.getElementById('resultCounterpartCount').textContent = counterparts.length;
	            document.getElementById('processedFiles').textContent = selectedFiles.length;
	            document.getElementById('protectedFiles').textContent = protectedFiles.length;
	            document.getElementById('processTime').textContent = processTime;
	            
	            // æ˜¾ç¤ºæ³•å¾‹å£°æ˜é¢„è§ˆ
	            const legalNotice = generateLegalNotice(creator, "", selectedFiles[0].name);
	            legalPreview.innerHTML = legalNotice.replace(/\n/g, '<br>');
	            
	            // åˆ›å»ºä¸‹è½½æŒ‰é’®
	            downloadButtons.innerHTML = '';
	            
	            // æ™ºèƒ½ä¸‹è½½é€»è¾‘
	            if (protectedFiles.length === 1) {
	                // å•ä¸ªæ–‡ä»¶ç›´æ¥ä¸‹è½½
	                const file = protectedFiles[0];
	                downloadButtons.innerHTML = `
	                    <button id="downloadProtected" class="btn btn-success btn-block">
	                        <i class="fas fa-download"></i> ä¸‹è½½ä¿æŠ¤æ–‡ä»¶ (${file.name})
	                    </button>
	                `;
	                document.getElementById('downloadProtected').addEventListener('click', () => {
	                    downloadFile(file.name, file.content);
	                });
	            } else {
	                // å¤šä¸ªæ–‡ä»¶æ‰“åŒ…ä¸‹è½½
	                downloadButtons.innerHTML = `
	                    <button id="downloadZip" class="btn btn-success btn-block">
	                        <i class="fas fa-file-archive"></i> ä¸‹è½½ä¿æŠ¤æ–‡ä»¶åŒ… (ZIP)
	                    </button>
	                `;
	                document.getElementById('downloadZip').addEventListener('click', downloadZipPackage);
	            }
	            
	            // æ˜¾ç¤ºç»“æœå¡ç‰‡
	            resultCard.style.display = 'block';
	            
	            // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
	            resultCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
	        }
	        
	        // ä¸‹è½½å•ä¸ªæ–‡ä»¶
	        function downloadFile(filename, content) {
	            const blob = new Blob([content], { type: 'application/octet-stream' });
	            const url = URL.createObjectURL(blob);
	            const a = document.createElement('a');
	            
	            a.href = url;
	            a.download = filename;
	            document.body.appendChild(a);
	            a.click();
	            
	            setTimeout(() => {
	                document.body.removeChild(a);
	                URL.revokeObjectURL(url);
	            }, 100);
	        }
	        
	        // ä¸‹è½½å‹ç¼©åŒ…
	        async function downloadZipPackage() {
	            const zip = new JSZip();
	            
	            // æ·»åŠ æ‰€æœ‰ä¿æŠ¤æ–‡ä»¶åˆ°ZIPï¼ˆä¿ç•™åŸå§‹åç¼€ï¼‰
	            protectedFiles.forEach(file => {
	                zip.file(file.name, file.content);
	            });
	            
	            // ç”ŸæˆZIPæ–‡ä»¶
	            const zipBlob = await zip.generateAsync({type: 'blob'});
	            
	            // ä¸‹è½½ZIP
	            const timestamp = new Date().toLocaleString('zh-CN', {
	                year: 'numeric',
	                month: '2-digit',
	                day: '2-digit',
	                hour: '2-digit',
	                minute: '2-digit'
	            }).replace(/[/:\s]/g, '');
	            
	            saveAs(zipBlob, `æ•°å­—èµ„äº§ä¿æŠ¤åŒ…_${timestamp}.zip`);
	            showMessage('success', 'å¼€å§‹ä¸‹è½½ä¿æŠ¤æ–‡ä»¶åŒ…');
	        }
	        
	        // è¾…åŠ©å‡½æ•°ï¼šç¡çœ 
	        function sleep(ms) {
	            return new Promise(resolve => setTimeout(resolve, ms));
	        }
	        
	        // è¾…åŠ©å‡½æ•°ï¼šæ ¼å¼åŒ–å­—èŠ‚å¤§å°
	        function formatBytes(bytes, decimals = 2) {
	            if (bytes === 0) return '0 Bytes';
	            
	            const k = 1024;
	            const dm = decimals < 0 ? 0 : decimals;
	            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
	            
	            const i = Math.floor(Math.log(bytes) / Math.log(k));
	            
	            return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
	        }
	        
	        // åˆå§‹åŒ–
	        init();
	        // åˆ›å»ºæ¨±èŠ±èŠ±ç“£æ•ˆæœ
	        createPetals();
	    </script>
	</body>
</html>